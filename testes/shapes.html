<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
    * {margin:0;background:black;}
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.js"></script>
    <script>
// Baseado em
// https://codepen.io/gadgetgnome/pen/jbPxwQ
var mousePos = {x:.5,y:.5};
document.addEventListener('mousemove', function (event) {  mousePos = {x:event.clientX/window.innerWidth, y:event.clientY/window.innerHeight};});
var phase = 0;

var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.z = 15;
camera.position.x = 0;
camera.position.y = 0;

var renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

var boxSize = 0.2;
var geometry = new THREE.BoxGeometry(boxSize, boxSize, boxSize);
var materialGreen = new THREE.MeshBasicMaterial({transparent: true,  color: 0xff0000,  opacity: 0.4,  side: THREE.DoubleSide});

var elevationSegments = 50;
var particles = elevationSegments;

/*
//curva senoide
// f(x) = a sen( b (x+c)) + d
a = amplitude
b = numero de onda
c = frequencia  angular ou mudança de fase... (offset horizontal)
d = offset vertical
*/
var parentContainer = new THREE.Object3D();
scene.add(parentContainer);

//Plant the seeds, grow some trees in a grid!

  for (var e = 0; e < elevationSegments; e++) {
    var particle = new THREE.Mesh(geometry, materialGreen);
    
    parentContainer.add(particle);

    var a = 0.2;
    var b = 2;
    var c = 0;
    var d = 0;

    var dest = new THREE.Vector3();
    dest.z = 0;
    dest.x = e * 0.5;//espaçamento entre os pontos
    dest.y = a * Math.sin( b * (dest.x + c)) + d;

    particle.position.x = dest.x;
    particle.position.y = dest.y;
    particle.position.z = dest.z;
  }


function render() {
  phase += 0.002;
  
  parentContainer.rotation.y = phase*3;
  parentContainer.rotation.x = (mousePos.y-0.5) * Math.PI;
  parentContainer.rotation.z = (mousePos.x-0.5) * Math.PI;

  renderer.render(scene, camera);
  requestAnimationFrame(render);
}
render();
    </script>
</body>
</html>